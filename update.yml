- hosts: all
  become: true

  tasks:
    - name: Ensure APT lock is absent
      file:
        path: /var/lib/apt/lists/lock
        state: absent
      become: true

    - name: Update and Upgrade APT Packages
      apt:
        upgrade: yes
        update_cache: yes
      ignore_errors: yes  # Optionally, to not fail the playbook on errors
